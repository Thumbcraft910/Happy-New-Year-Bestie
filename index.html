
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Happy New Year 2026, Bestie! âœ¨</title>
    
    <!-- External Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Framer Motion UMD bundle usually exports as 'Motion' -->
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Pacifico&family=Quicksand:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #020617;
            font-family: 'Quicksand', sans-serif;
            touch-action: none;
            color: white;
        }
        .font-cursive { font-family: 'Pacifico', cursive; }
        .font-emotional { font-family: 'Dancing Script', cursive; }
        .text-glow { text-shadow: 0 0 15px rgba(255, 255, 255, 0.4); }
        canvas { filter: blur(0.5px); }
        .transition-bg { transition: background 1.5s ease-in-out; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useRef } = React;
        // Fix: Framer Motion UMD exposes 'Motion' global instead of 'FramerMotion' in some versions
        const MotionGlobal = window.Motion || window.FramerMotion;
        const { motion, AnimatePresence } = MotionGlobal;

        // --- Content Constants ---
        const SLIDES = [
            { id: 1, title: "Happy New Year 2026, Bestie! ðŸ’–", message: "Cheers to another year of being my favorite person Thank you for making life absolutely fun.", highlight: "Let's make this year unforgettable.", bgGradient: "from-slate-950 via-purple-950 to-slate-950", icon: "âœ¨" },
            { id: 2, title: "Wishes for Happiness & Radiance", message: "May this year bring you happiness & glowing energy You deserve everything beautiful.", highlight: "You're more than a best friend.", bgGradient: "from-purple-950 via-indigo-950 to-slate-950", icon: "ðŸŒ¸" },
            { id: 3, title: "The Best Memories", message: "Thank you for being my safe place & my madness I love our endless late-night chats.", highlight: "Our bond is forever.", bgGradient: "from-indigo-950 via-blue-950 to-slate-950", icon: "ðŸ“¸" },
            { id: 4, title: "Dreams & New Beginnings", message: "This year, I wish you all the success, love, and happiness in the world. Shine bright, because you deserve it all!", highlight: "The world is yours this year.", bgGradient: "from-blue-950 via-pink-950 to-slate-950", icon: "â­" },
            { id: 5, title: "Ready for 2026?", message: "Let's start this journey together. Cheers to us, to our friendship, and to the best year yet!", highlight: "Happy New Year, my favorite human! ðŸŽ‰", bgGradient: "from-pink-950 via-purple-950 to-slate-950", icon: "ðŸ¾" }
        ];

        // --- Helper Components ---
        const Icon = ({ name, size = 24, className = "" }) => {
            useEffect(() => {
                if (window.lucide) window.lucide.createIcons();
            }, [name]);
            const kebabName = name.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase();
            return <i data-lucide={kebabName} style={{ width: size, height: size }} className={className}></i>;
        };

        const Snowfall = () => {
            const canvasRef = useRef(null);
            useEffect(() => {
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
                let animationFrameId;
                let particles = [];

                const resize = () => {
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                    const count = Math.floor((canvas.width * canvas.height) / 10000);
                    particles = Array.from({ length: count }, () => ({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        radius: Math.random() * 2 + 0.5,
                        speed: Math.random() * 0.8 + 0.2,
                        wind: Math.random() * 0.4 - 0.2
                    }));
                };

                const animate = () => {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.4)';
                    particles.forEach(p => {
                        ctx.beginPath();
                        ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                        ctx.fill();
                        p.y += p.speed;
                        p.x += p.wind;
                        if (p.y > canvas.height) { p.y = -p.radius; p.x = Math.random() * canvas.width; }
                    });
                    animationFrameId = requestAnimationFrame(animate);
                };

                window.addEventListener('resize', resize);
                resize();
                animate();
                return () => { window.removeEventListener('resize', resize); cancelAnimationFrame(animationFrameId); };
            }, []);
            return <canvas ref={canvasRef} className="fixed inset-0 pointer-events-none z-10" />;
        };

        const AnimatedText = ({ text, delay = 0 }) => {
            const words = text.split(" ");
            const container = { visible: { transition: { staggerChildren: 0.1, delayChildren: delay } } };
            const item = { visible: { opacity: 1, y: 0 }, hidden: { opacity: 0, y: 15 } };
            return (
                <motion.div className="flex flex-wrap justify-center" initial="hidden" animate="visible" variants={container}>
                    {words.map((w, i) => <motion.span key={i} className="mr-3" variants={item}>{w}</motion.span>)}
                </motion.div>
            );
        };

        // --- Main Application ---
        const App = () => {
            const [idx, setIdx] = useState(0);
            const [started, setStarted] = useState(false);
            const [audio, setAudio] = useState(false);
            const audioCtx = useRef(null);

            const playChime = () => {
                if (!audio) return;
                if (!audioCtx.current) audioCtx.current = new (window.AudioContext || window.webkitAudioContext)();
                const now = audioCtx.current.currentTime;
                [440, 554, 659, 880].forEach((f, i) => {
                    const osc = audioCtx.current.createOscillator();
                    const gain = audioCtx.current.createGain();
                    osc.type = 'sine';
                    osc.frequency.setValueAtTime(f, now + i * 0.1);
                    gain.gain.setValueAtTime(0, now + i * 0.1);
                    gain.gain.linearRampToValueAtTime(0.04, now + i * 0.1 + 0.05);
                    gain.gain.exponentialRampToValueAtTime(0.0001, now + i * 0.1 + 0.6);
                    osc.connect(gain); gain.connect(audioCtx.current.destination);
                    osc.start(now + i * 0.1); osc.stop(now + i * 0.1 + 0.6);
                });
            };

            const goNext = () => { if (idx < SLIDES.length - 1) { setIdx(idx + 1); playChime(); } else { confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } }); playChime(); } };
            const goPrev = () => { if (idx > 0) { setIdx(idx - 1); playChime(); } };

            useEffect(() => {
                if (started && idx === SLIDES.length - 1) {
                    confetti({ particleCount: 100, spread: 60, origin: { y: 0.7 } });
                }
            }, [idx, started]);

            if (!started) return (
                <div className="h-screen w-full flex flex-col items-center justify-center bg-slate-950 relative">
                    <Snowfall />
                    <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 1.5 }} className="z-20 text-center px-6">
                        <Icon name="Stars" size={80} className="text-yellow-100/80 mb-8 mx-auto animate-pulse" />
                        <h1 className="text-5xl md:text-7xl font-cursive mb-6 text-glow bg-clip-text text-transparent bg-gradient-to-r from-pink-200 to-indigo-200">
                            Happy New Year 2026, Bestie!
                        </h1>
                        <p className="text-lg text-slate-400 mb-10 tracking-[0.2em] font-light">I made this for you...</p>
                        <button onClick={() => { setStarted(true); setAudio(true); setTimeout(playChime, 300); }} 
                            className="px-10 py-4 bg-white/5 border border-white/20 rounded-full hover:bg-white/10 transition-all text-white text-lg">
                            Open My Surprise âœ¨
                        </button>
                    </motion.div>
                </div>
            );

            const s = SLIDES[idx];
            return (
                <div className={`h-screen w-full flex flex-col items-center justify-center transition-bg bg-gradient-to-b ${s.bgGradient} relative px-6 text-center`}>
                    <Snowfall />
                    <div className="fixed top-6 right-6 z-50">
                        <button onClick={() => setAudio(!audio)} className="p-3 bg-white/10 rounded-full border border-white/10 opacity-60 hover:opacity-100 transition-opacity">
                            <Icon name={audio ? "Volume2" : "VolumeX"} size={22} className="text-white" />
                        </button>
                    </div>

                    <AnimatePresence mode="wait">
                        <motion.div key={idx} initial={{ opacity: 0, x: 50 }} animate={{ opacity: 1, x: 0 }} exit={{ opacity: 0, x: -50 }} transition={{ duration: 0.7, ease: "easeOut" }} className="z-20 max-w-4xl">
                            <div className="text-8xl mb-10 drop-shadow-2xl">{s.icon}</div>
                            <h2 className="text-4xl md:text-6xl font-cursive mb-10 text-glow leading-tight">
                                <AnimatedText text={s.title} />
                            </h2>
                            <p className="text-xl md:text-3xl font-emotional italic mb-10 opacity-90 leading-relaxed max-w-2xl mx-auto">
                                "{s.message}"
                            </p>
                            <div className="text-2xl md:text-3xl font-bold text-yellow-200 mb-16 drop-shadow-lg tracking-tight">
                                {s.highlight}
                            </div>
                            
                            <div className="flex items-center justify-center gap-8">
                                <button onClick={goPrev} disabled={idx === 0} className={`p-5 rounded-full border border-white/10 transition-all ${idx === 0 ? 'opacity-10 cursor-not-allowed' : 'hover:bg-white/10 active:scale-90'}`}>
                                    <Icon name="ChevronLeft" size={28} />
                                </button>
                                <div className="flex gap-3">
                                    {SLIDES.map((_, i) => <div key={i} className={`h-2 rounded-full transition-all duration-700 ${idx === i ? 'w-10 bg-pink-400 shadow-[0_0_10px_#f472b6]' : 'w-2 bg-white/20'}`} />)}
                                </div>
                                <button onClick={goNext} className="p-5 rounded-full bg-white/10 border border-white/10 hover:bg-white/20 active:scale-90 shadow-xl transition-all">
                                    <Icon name="ChevronRight" size={28} />
                                </button>
                            </div>
                        </motion.div>
                    </AnimatePresence>

                    <footer className="absolute bottom-8 w-full text-center text-white/20 text-[10px] tracking-[0.5em] font-light uppercase pointer-events-none">
                        Best Friends Forever â€¢ Chapter 2026
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
